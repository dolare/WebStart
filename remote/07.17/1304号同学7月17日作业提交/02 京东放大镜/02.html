<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>2 京东放大镜</title>
<style type="text/css">
	*{
		padding: 0;
		margin: 0;
		background: #f5f5f5;
	}
	#main{
		background: #fff;
		border: 1px #ccc solid;
		width: 1000px;
		height: 420px;
		overflow: hidden;
		margin: 30px auto;
	}
	#left{
		width: 350px;
		height: 350px;
		margin: 14px;
		position: relative;
		float: left;
		overflow: hidden;
		cursor: move;
	}
	#right{
		width: 400px;
		height: 400px;
		background: #fff;
		float: left;
		border: 1px #e4e4e4 solid;
		position: relative;
		overflow: hidden;
		display: none;
	}
	#hov{
		width: 175px;
		height: 175px;
		background: #fede4f;
		opacity: .5;
		filter:alpha(opacity=50);
		border: 1px #aaa solid;
		display: none;
		position: absolute;
	}
	#bigpic{
		position: absolute;
	}
	#cover{
		width: 350px;
		height: 350px;
		position: absolute;
		left: 0;
		top: 0;
		opacity: 0;
		filter:alpha(opacity=0);
	}
</style>
<script type="text/javascript">
	window.onload = function(){
		// 抓元素
		var left   = document.getElementById('left');
		var right  = document.getElementById('right');
		var hov    = document.getElementById('hov');
		var bigpic = document.getElementById('bigpic');
		var cover  = document.getElementById('cover');
		// 给左侧鼠标添加移动事件
		cover.onmousemove = function(e){
			// 获得事件对象
			var ev = window.event || e;
			// 获得鼠标左侧与事件源 左侧和顶部的距离
			var mouse_left = ev.layerX || ev.offsetX;
			var mouse_top = ev.layerY  || ev.offsetY;
			document.title = mouse_left+'|'+mouse_top;
			// 计算小色块的位置
			var box_left = mouse_left-87.5;
			var box_top  = mouse_top -87.5;
			if(box_left<0){
				box_left = 0;
			}
			if(box_top<0){
				box_top = 0;
			}
			if(box_left>173){
				box_left = 173;
			}
			if(box_top>173){
				box_top = 173;
			}
			// 给小色块指定位置
			hov.style.left = box_left +'px';
			hov.style.top = box_top +'px';
			// 计算右侧大图片的位置
			var bigpic_left = box_left*-(800/350);
			var bigpic_top  = box_top*-(800/350);
			// 将计算的新值赋值回去
			bigpic.style.left = bigpic_left +'px';
			bigpic.style.top  = bigpic_top + 'px';
		}
		// 添加左侧鼠标移入事件
		left.onmouseover = function(){
			hov.style.display = 'block';//色块显示
			right.style.display  = 'block';//右侧大图显示
		}
		// 添加左侧鼠标移出事件
		left.onmouseout = function(){
			hov.style.display = 'none';//色块隐藏
			right.style.display  = 'none';//右侧大图隐藏
		}
	}
</script>
</head>

<body>
<div id="main">
	<div id="left">
		<img src="images/350.jpg" alt="" />
		<div id="hov"></div>
		<div id="cover"></div>
	</div>
	<div id="right">
		<img id="bigpic" src="images/800.jpg" alt="" />
	</div>
</div>
</body>
</html>
